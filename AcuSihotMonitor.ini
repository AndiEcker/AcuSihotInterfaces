[Settings]
serverip = 10.103.222.52
acudsn = SP.WORLD
checks = '''[{'name': 'Acumen', 'background_color': (0.75, 0.6, 0, 1)}, {'name': 'Categorized apartments', 'from_join': 'T_AP, T_AT', 'where_group_order': "AP_ATREF = AT_CODE and exists (select LU_NUMBER from T_LU where LU_CLASS = 'SIHOT_HOTELS' and LU_ID = AT_RSREF and LU_ACTIVE = 1)", 'cols': ['AP_CODE as apt', 'AP_SIHOT_CAT as sh_cat', 'AT_GENERIC as acu_cat', 'AP_QUALITY as acu_quality', '(select f_stragg(AFT_DESC) from T_AFR, T_AFT where AFR_AFTREF = AFT_CODE and AFR_APREF = AP_CODE) as acu_feat'], 'parent_board': 'Acumen'}, {'name': 'Uncategoriesed apartments', 'from_join': 'T_AP', 'where_group_order': "AP_SIHOT_CAT is NULL and exists (select LU_NUMBER from T_LU where LU_CLASS = 'SIHOT_HOTELS' and LU_ID = (select AT_RSREF from T_AT where AT_CODE = AP_ATREF) and LU_ACTIVE = 1) order by AP_CODE", 'cols': ['AP_CODE as apt'], 'parent_board': 'Acumen'}, {'name': 'Unsynced guests', 'from_join': 'V_ACU_CD_UNSYNCED', 'cols': ['CD_CODE as mc'], 'parent_board': 'Acumen'}, {'name': 'Unsynced reservations', 'from_join': 'V_ACU_RES_UNSYNCED', 'cols': ["nvl(SIHOT_GDSNO, case when RUL_SIHOT_RATE in ('TC', 'TK') then (select 'TC' || RH_EXT_BOOK_REF from T_RH where RH_CODE = F_KEY_VAL(replace(replace(RUL_CHANGES, ' (', '='''), ')', ''''), 'RU_RHREF')) else to_char(RUL_PRIMARY) end) as gds", 'SIHOT_MKT_SEG as ro', 'OC_CODE as omc', 'CD_CODE as mc', 'SIHOT_LINK_GROUP as link_group'], 'parent_board': 'Acumen'}, {'name': 'Guest sync log', 'from_join': 'T_SRSL', 'where_group_order': "SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'CD' and substr(SRSL_STATUS, 1, 6) = 'SYNCED' order by SRSL_DATE desc", 'cols': ['SRSL_PRIMARY as pk', 'SRSL_LOGREF'], 'parent_board': 'Acumen'}, {'name': 'Reservation sync log', 'from_join': 'T_SRSL', 'where_group_order': "SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'RU' and substr(SRSL_STATUS, 1, 6) = 'SYNCED' order by SRSL_DATE desc", 'cols': ['SRSL_PRIMARY as pk', 'SRSL_LOGREF'], 'parent_board': 'Acumen'}, {'name': 'Guest sync errors', 'from_join': 'T_SRSL', 'where_group_order': "SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'CD' and substr(SRSL_STATUS, 1, 6) <> 'SYNCED' order by SRSL_DATE desc", 'cols': ['SRSL_PRIMARY as pk', 'SRSL_STATUS', 'SRSL_MESSAGE as err'], 'parent_board': 'Acumen'}, {'name': 'Reservation sync errors', 'from_join': 'T_SRSL', 'where_group_order': "SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'RU' and substr(SRSL_STATUS, 1, 6) <> 'SYNCED' order by SRSL_DATE desc", 'cols': ['SRSL_PRIMARY as pk', 'SRSL_STATUS', 'SRSL_MESSAGE as err'], 'parent_board': 'Acumen'}, {'name': 'Sihot', 'background_color': (0.69, 0, 0, 1)}, {'name': 'Reservation Discrepancies', 'parent_board': 'Sihot', 'last_check': '19-02-17 18:16:55', 'check_result': [('TCVN22045404', 'Room no mismatch D105 a=None'), ('TCVN22045404', 'Room no mismatch D105 a=None'), ('TCVS10518795', 'Room no mismatch H216 a=I101'), ('TC27185541', 'Room no mismatch 1121 a=1227'), ('TC27051782', 'Room no mismatch E401 a=F003'), ('TCVN22047393', 'Room no mismatch B201 a=B105'), ('TCVS10638770', 'Room no mismatch 0524 a=0822'), ('TC29172846', 'Room no mismatch 0434 a=0521'), ('TCVN21904590', 'Arrival date mismatch 2017-01-31 a=2017-01-29'), ('TCVN22042910', 'Depart. date mismatch 2017-02-19 a=2017-02-21'), ('TCVN22044692', 'Room no mismatch D101 a=D106'), ('TCVN22046174', 'Room no mismatch A208 a=B103'), ('TC27675204', 'Room no mismatch H006 a=H115'), ('TCVS10668149', 'Room no mismatch E202 a=E205'), ('TCVS10668238', 'Room no mismatch H010 a=H012'), ('TC25515471', 'Room no mismatch V007 a=0935'), ('TCVN22047668', 'Room no mismatch G001 a=F303'), ('TC26132444', 'Room no mismatch D102 a=A214'), ('TCTF47967141', 'Res. count!=1 2/Arrival date mismatch 2017-02-13 a=2017-02-07/Room no mismatch B104 a=A121'), ('TCVN22041166', 'Room no mismatch G304 a=G204'), ('TCVN22041166', 'Room no mismatch G304 a=F102'), ('TCVN22041166', 'Room no mismatch G304 a=G004'), ('TC16942871', 'Room no mismatch I201 a=I104'), ('993693', 'Res. count!=1 2/Arrival date mismatch 2017-02-18 a=2017-02-17'), ('TCSD38052098', 'Res. count!=1 4/Arrival date mismatch 2017-02-17 a=2017-02-16/Room no mismatch  a=D102'), ('TCSD38052098', 'Res. count!=1 4/Arrival date mismatch 2017-02-17 a=2017-02-16/Room no mismatch  a=C206'), ('TCVS10627015', 'Room no mismatch G106 a=None'), ('TC22313339', 'Room no mismatch A124 a=A201'), ('TCVS10637539', 'Room no mismatch 0421 a=0624'), ('TCVN22013505', 'Room no mismatch 0923 a=1018'), ('TCVS10440861', 'Arrival date mismatch 2017-02-05 a=2017-02-19/Depart. date mismatch 2017-02-19 a=2017-02-26/Room no mismatch 0633 a=1122'), ('TCVS10575817', 'Room no mismatch 0722 a=0726'), ('TCVS10580059', 'Room no mismatch 0427 a=0531'), ('TCSD37928325', 'Room no mismatch 0602 a=0502'), ('TCTF47964481', 'Room no mismatch I101 a=I204'), ('TCVS10611056', 'Room no mismatch 0406 a=0410'), ('TCVN22034933', 'Room no mismatch C204 a=H016'), ('TCVN21970877', 'Room no mismatch  a=1226'), ('TCVN21971839', 'Room no mismatch  a=1222'), ('TCVN21973708', 'Room no mismatch  a=0723'), ('TCVN22000323', 'Room no mismatch  a=0610'), ('TCSD37840200', 'Res. count!=1 2/Arrival date mismatch 2017-02-14 a=2017-02-07/Room no mismatch B204 a=C106'), ('989779', 'Res. count!=1 3/Arrival date mismatch 2017-02-20 a=2017-02-17/Room no mismatch  a=0605')], 'background_color': (0.69, 0, 0, 1)}, {'name': 'Notification', 'parent_board': 'Sihot', 'background_color': (0.69, 0, 0, 1)}, {'name': 'Acu Server', 'background_color': (0.75, 0.36, 0, 1)}, {'name': 'Time Sync', 'parent_board': 'Acu Server'}, {'name': 'Link Alive', 'parent_board': 'Acu Server'}, {'name': 'System Config', 'background_color': (0, 0, 0.6, 1)}, {'name': 'Agency Match Codes', 'parent_board': 'System Config'}, {'name': 'Agency Object Ids', 'parent_board': 'System Config'}]'''
ori_checks = '''[
	dict(name='Acumen', background_color=(0.75, 0.6, 0, 1)),
	dict(name='Categorized apartments', parent_board='Acumen', from_join='T_AP, T_AT',
	cols=['AP_CODE as apt', 'AP_SIHOT_CAT as sh_cat', 'AT_GENERIC as acu_cat', 'AP_QUALITY as acu_quality',
	'(select f_stragg(AFT_DESC) from T_AFR, T_AFT where AFR_AFTREF = AFT_CODE and AFR_APREF = AP_CODE) as acu_feat'],
	where_group_order="AP_ATREF = AT_CODE"
	" and exists (select LU_NUMBER from T_LU where LU_CLASS = 'SIHOT_HOTELS'"
	" and LU_ID = AT_RSREF and LU_ACTIVE = 1)"),
	dict(name='Uncategoriesed apartments', parent_board='Acumen', from_join='T_AP', cols=['AP_CODE as apt'],
	where_group_order="AP_SIHOT_CAT is NULL"
	" and exists (select LU_NUMBER from T_LU where LU_CLASS = 'SIHOT_HOTELS'"
	" and LU_ID = (select AT_RSREF from T_AT where AT_CODE = AP_ATREF) and LU_ACTIVE = 1) order by AP_CODE"),
	dict(name='Unsynced guests', parent_board='Acumen', from_join='V_ACU_CD_UNSYNCED', cols=['CD_CODE as mc']),
	dict(name='Unsynced reservations', parent_board='Acumen', from_join='V_ACU_RES_UNSYNCED',
	cols=["nvl(SIHOT_GDSNO, case when RUL_SIHOT_RATE in ('TC', 'TK') then"
	" (select 'TC' || RH_EXT_BOOK_REF from T_RH where"
	" RH_CODE = F_KEY_VAL(replace(replace(RUL_CHANGES, ' (', '='''), ')', ''''), 'RU_RHREF'))"
	" else to_char(RUL_PRIMARY) end) as gds",
	'SIHOT_MKT_SEG as ro', 'OC_CODE as omc', 'CD_CODE as mc', 'SIHOT_LINK_GROUP as link_group']),
	dict(name='Guest sync log', parent_board='Acumen', from_join='T_SRSL',
	cols=['SRSL_PRIMARY as pk', 'SRSL_LOGREF'],
	where_group_order="SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'CD'"
	" and substr(SRSL_STATUS, 1, 6) = 'SYNCED'"
	" order by SRSL_DATE desc"),
	dict(name='Reservation sync log', parent_board='Acumen', from_join='T_SRSL',
	cols=['SRSL_PRIMARY as pk', 'SRSL_LOGREF'],
	where_group_order="SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'RU'"
	" and substr(SRSL_STATUS, 1, 6) = 'SYNCED'"
	" order by SRSL_DATE desc"),
	dict(name='Guest sync errors', parent_board='Acumen', from_join='T_SRSL',
	cols=['SRSL_PRIMARY as pk', 'SRSL_STATUS', 'SRSL_MESSAGE as err'],
	where_group_order="SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'CD'"
	" and substr(SRSL_STATUS, 1, 6) <> 'SYNCED'"
	" order by SRSL_DATE desc"),
	dict(name='Reservation sync errors', parent_board='Acumen', from_join='T_SRSL',
	cols=['SRSL_PRIMARY as pk', 'SRSL_STATUS', 'SRSL_MESSAGE as err'],
	where_group_order="SRSL_DATE = trunc(sysdate) and SRSL_TABLE = 'RU'"
	" and substr(SRSL_STATUS, 1, 6) <> 'SYNCED'"
	" order by SRSL_DATE desc"),
	dict(name='Sihot', background_color=(0.69, 0, 0, 1)),
	dict(name='Reservation Discrepancies', parent_board='Sihot'),
	dict(name='Notification', parent_board='Sihot'),
	dict(name='Acu Server', background_color=(0.75, 0.36, 0, 1)),
	dict(name='Time Sync', parent_board='Acu Server'),
	dict(name='Link Alive', parent_board='Acu Server'),
	dict(name='System Config', background_color=(0, 0, 0.6, 1)),
	dict(name='Agency Match Codes', parent_board='System Config'),
	dict(name='Agency Object Ids', parent_board='System Config'),
	]'''

